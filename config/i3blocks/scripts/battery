#!/usr/bin/env bash
# i3blocks - battery
# Affiche l'état de la batterie en % et charging/discharging
# Ne renvoie rien si pas de batterie

# Détecter le chemin de la batterie (ACPI)
BAT_PATH=$(ls /sys/class/power_supply/ | grep -E '^BAT')

# Si aucune batterie, ne rien afficher
if [ -z "$BAT_PATH" ]; then
    exit 0
fi

BAT_DIR="/sys/class/power_supply/$BAT_PATH"

# Lire le niveau de charge en %
if [ -f "$BAT_DIR/capacity" ]; then
    CAPACITY=$(cat "$BAT_DIR/capacity")
else
    CAPACITY="N/A"
fi

# Lire l'état (Charging/Discharging/Full)
if [ -f "$BAT_DIR/status" ]; then
    STATUS=$(cat "$BAT_DIR/status")
else
    STATUS="Unknown"
fi

echo " ${CAPACITY}% ${STATUS} "

