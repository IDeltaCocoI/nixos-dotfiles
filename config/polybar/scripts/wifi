#!/usr/bin/env bash
# i3blocks - wifi
# Affiche le SSID si connecté en Wi-Fi, "Ethernet" si câble, rien si aucune connexion

# Détecter l'interface active
ACTIVE_IF=$(ip route | awk '/default/ {print $5; exit}')

if [ -z "$ACTIVE_IF" ]; then
    # Pas de connexion
    exit 0
fi

# Vérifier si c'est du Wi-Fi
if iw dev "$ACTIVE_IF" info &>/dev/null; then
    # Wi-Fi : récupérer le SSID
    SSID=$(iw dev "$ACTIVE_IF" link | awk -F': ' '/SSID/ {print $2}')
    if [ -n "$SSID" ]; then
        echo "$SSID"
    else
        echo " Wi-Fi "
    fi
else
    # Pas Wi-Fi → Ethernet ou autre
    echo " Ethernet "
fi

